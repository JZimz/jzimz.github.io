__NUXT_JSONP__("/blog/how-to-parse-twitch-emotes-with-tmijs", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag){return {data:[{post:{slug:"how-to-parse-twitch-emotes-with-tmijs",description:"You don't have to! There's a util for that now.",title:"How To Parse Twitch Emotes With tmi.js",thumbnail:J,createdAt:"2023-06-02T00:00:00.000Z",toc:[],body:{type:"root",children:[{type:b,tag:"blog-post-image",props:{src:J},children:[{type:a,value:g}]},{type:a,value:g},{type:b,tag:w,props:{},children:[{type:a,value:"If you've ever tried to build a Twitch chat bot in JavaScript before, I'm sure you've come across the "},{type:b,tag:x,props:{href:"https:\u002F\u002Ftmijs.com\u002F",rel:[y,z,A],target:B},children:[{type:a,value:"tmi.js"}]},{type:a,value:" library. It's an incredibly useful wrapper around the Twitch IRC API and I recommend trying it out. "},{type:b,tag:K,props:{},children:[{type:a,value:"If you want to handle emotes though you'll need to do a little extra work."}]},{type:a,value:" Here's how"}]},{type:a,value:g},{type:b,tag:w,props:{},children:[{type:b,tag:K,props:{},children:[{type:a,value:"The short answer:"}]},{type:a,value:" Use the "},{type:b,tag:x,props:{href:"https:\u002F\u002Fwww.npmjs.com\u002Fpackage\u002Ftmi-utils",rel:[y,z,A],target:B},children:[{type:a,value:"tmi-utils"}]},{type:a,value:" library. I made it so we all don't have to worry about this anymore."}]},{type:a,value:g},{type:b,tag:w,props:{},children:[{type:a,value:"We need this because tmi.js only provides us with the emote id and the positions it is found in the message string. When given the message string "},{type:b,tag:"em",props:{},children:[{type:a,value:"\"staying on the map is hard LUL LUL wow\""}]},{type:a,value:" we will receive the following in the tags object:"}]},{type:a,value:g},{type:b,tag:L,props:{className:[M]},children:[{type:b,tag:N,props:{className:[O,P]},children:[{type:b,tag:F,props:{},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:l},{type:b,tag:c,props:{className:[d,"literal-property",Q]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:S}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,"string-property",Q]},children:[{type:a,value:"'425618'"}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:S}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:"["}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:"'27-29'"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:"'31-33'"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:"]"}]},{type:a,value:l},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:w,props:{},children:[{type:a,value:"So if you want the emote images to show up you'll need to replace each emote string with an "},{type:b,tag:F,props:{},children:[{type:a,value:"\u003Cimg\u003E"}]},{type:a,value:" tag. I had to write this for a "},{type:b,tag:x,props:{href:"https:\u002F\u002Fwww.etsy.com\u002Flisting\u002F1470389712\u002Ftwitch-chat-widget-with-special-styles",rel:[y,z,A],target:B},children:[{type:a,value:"Twitch chat widget"}]},{type:a,value:" I made recently so I "},{type:b,tag:x,props:{href:"https:\u002F\u002Ftwitter.com\u002FJZimz\u002Fstatus\u002F1653943961377964032",rel:[y,z,A],target:B},children:[{type:a,value:"discussed the solution"}]},{type:a,value:" with the maintainer of tmi.js and turned it into a module so you can use it too!"}]},{type:a,value:g},{type:b,tag:w,props:{},children:[{type:a,value:"Here's how I use tmi.js and tmi-utils to embed Twitch emotes into the chat messages I render in the DOM."}]},{type:a,value:g},{type:b,tag:L,props:{className:[M]},children:[{type:b,tag:N,props:{className:[O,P]},children:[{type:b,tag:F,props:{},children:[{type:b,tag:c,props:{className:[d,k,E]},children:[{type:a,value:T}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:V}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k,E]},children:[{type:a,value:W}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:"'tmi.js'"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,k,E]},children:[{type:a,value:T}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,U]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:" getEmoteAsUrl"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:" parseEmotesInMessage "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k,E]},children:[{type:a,value:W}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:"'tmi-utils'"}]},{type:a,value:"\n\n"},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:C}]},{type:a,value:" client "},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:u}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:X}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,Y]},children:[{type:a,value:V},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:"Client"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:l},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\u002F* tmi options *\u002F"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"\nclient"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,v,r,o]},children:[{type:a,value:"connect"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"\n\nclient"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,v,r,o]},children:[{type:a,value:"on"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:"'message'"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,Z]},children:[{type:a,value:"channel"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:" tags"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:_},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:" self"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,$,j]},children:[{type:a,value:aa}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:l},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\u002F\u002F The emotes object is a mapping of emote id to a list"}]},{type:a,value:l},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\u002F\u002F of it's positions in the message string. For example,"}]},{type:a,value:l},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\u002F\u002F"}]},{type:a,value:l},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\u002F\u002F message: staying on the map is hard LUL LUL wow"}]},{type:a,value:l},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\u002F\u002F emotes : { 425618: ['27-29', '31-33'] }"}]},{type:a,value:l},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:C}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:" emotes "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:u}]},{type:a,value:" tags\n\n  "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\u002F\u002F `parseEmotesInMessage` splits the message up into strings and emotes"}]},{type:a,value:l},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:C}]},{type:a,value:" parsedMessage "},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:u}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"parseEmotesInMessage"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:R},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:_},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:G},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\u002F\u002F Then you can render the message with emotes however you like"}]},{type:a,value:l},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:C}]},{type:a,value:" message "},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:u}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ab,ac]},children:[{type:a,value:ad}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,v,r,o]},children:[{type:a,value:"createElement"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:"'span'"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:G},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\u002F\u002F Safely append each part"}]},{type:a,value:"\n  parsedMessage"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,v,r,o]},children:[{type:a,value:"forEach"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,Z]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:" type"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:" value"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:" raw "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,$,j]},children:[{type:a,value:aa}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,k,ae]},children:[{type:a,value:"if"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:"type "},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"==="}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:"'emote'"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:H},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:C}]},{type:a,value:" img "},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:u}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:X}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,Y]},children:[{type:a,value:"Image"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:H},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\u002F\u002F Converts the emote id to URL"}]},{type:a,value:af},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:"src"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:u}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"getEmoteAsUrl"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:H},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\u002F\u002F Raw is the original emote text (e.g. LUL)"}]},{type:a,value:af},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:"alt"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:u}]},{type:a,value:" raw\n      img"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:"title"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:u}]},{type:a,value:" raw\n\n      message"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,v,r,o]},children:[{type:a,value:I}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:"img"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k,ae]},children:[{type:a,value:"else"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"\n      message"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,v,r,o]},children:[{type:a,value:I}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:D},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:l},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:G},{type:b,tag:c,props:{className:[d,ab,ac]},children:[{type:a,value:ad}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,v,r,o]},children:[{type:a,value:"querySelector"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:"'.message-list'"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,v,r,o]},children:[{type:a,value:I}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:"message"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:w,props:{},children:[{type:a,value:"If you want to learn more or know of a better way, let me know! You can "},{type:b,tag:x,props:{href:"https:\u002F\u002Ftwitter.com\u002FJZimz",rel:[y,z,A],target:B},children:[{type:a,value:"message me on Twitter"}]},{type:a,value:" or come "},{type:b,tag:x,props:{href:"https:\u002F\u002Ftwitch.com\u002Fjzimz",rel:[y,z,A],target:B},children:[{type:a,value:"hangout on Twitch"}]},{type:a,value:" sometime."}]}]},dir:"\u002Fblog-posts",path:"\u002Fblog-posts\u002Fhow-to-parse-twitch-emotes-with-tmijs",extension:".md",updatedAt:"2023-08-08T03:52:37.824Z",readingTime:{text:"3 min read",minutes:2.015,time:120900,words:403}}}],fetch:{},mutations:void 0}}("text","element","span","token","punctuation"," ","\n","(",")","operator","keyword","\n  ",".","comment","property-access","{","}","function",",","string","=","method","p","a","nofollow","noopener","noreferrer","_blank","const","\n    ","module","code","\n\n  ","\n      ","append","\u002Fimg\u002Fhow-to-parse-twitch-emotes_thumb.png","strong","div","nuxt-content-highlight","pre","language-js","line-numbers","property","emotes",":","import","imports","tmi","from","new","class-name","parameter"," message","arrow","=\u003E","dom","variable","document","control-flow","\n      img","value")));