<!doctype html>
<html data-n-head-ssr lang="en" prefix="og: https://ogp.me/ns#" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D,%22prefix%22:%7B%22ssr%22:%22og:%20https://ogp.me/ns#%22%7D%7D">
  <head>
    <title>How to Build a Restream Server</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="description" name="description" content=""><meta data-n-head="ssr" name="format-detection" content="telephone=no"><meta data-n-head="ssr" data-hid="twitter:card" name="twitter:card" content="summary_large_image"><meta data-n-head="ssr" data-hid="twitter:site" name="twitter:site" content="@jzimz"><meta data-n-head="ssr" data-hid="twitter:creator" name="twitter:creator" content="@jzimz"><meta data-n-head="ssr" data-hid="og:url" name="og:url" content="https://jzimz.com/blog/how-to-multistream"><meta data-n-head="ssr" data-hid="og:title" name="og:title" content="How to Build a Restream Server"><meta data-n-head="ssr" data-hid="og:description" name="og:description" content="You don't NEED Restream.io to multistream. Try building it yourself for less!"><meta data-n-head="ssr" data-hid="og:image" name="og:image" content="https://jzimz.com/img/how-to-multistream_thumb.png"><link data-n-head="ssr" rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"><link data-n-head="ssr" rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"><link data-n-head="ssr" rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon/favicon.ico"><link data-n-head="ssr" data-hid="gf-prefetch" rel="dns-prefetch" href="https://fonts.gstatic.com/"><link data-n-head="ssr" data-hid="gf-preconnect" rel="preconnect" href="https://fonts.gstatic.com/" crossorigin=""><link data-n-head="ssr" data-hid="gf-preload" rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900"><script data-n-head="ssr" data-hid="gf-script">!function(){var e=document.createElement("link");e.rel="stylesheet",e.href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900",document.querySelector("head").appendChild(e)}()</script><noscript data-n-head="ssr" data-hid="gf-noscript"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900"></noscript><link rel="preload" href="/_nuxt/e13a847.js" as="script"><link rel="preload" href="/_nuxt/3afc5f9.js" as="script"><link rel="preload" href="/_nuxt/2176ed4.js" as="script"><link rel="preload" href="/_nuxt/1ee46e7.js" as="script"><link rel="preload" href="/_nuxt/4476dfd.js" as="script"><link rel="preload" href="/_nuxt/51445f8.js" as="script"><link rel="preload" href="/_nuxt/66def5b.js" as="script"><link rel="preload" href="/_nuxt/bada754.js" as="script"><style data-vue-ssr-id="4286c237:0 79f7a5ba:0 fa7ff0ca:0 2726c61f:0 04e2f6f8:0 63b2d4fd:0 f6ed190a:0">:root{--black:#212529;--semi-black:#343a40;--dark-grey-1:#495057;--dark-grey-2:#6c757d;--grey-1:#6c757d;--grey-2:#adb5bd;--grey-3:#ced4da;--light-grey-1:#dee2e6;--light-grey-2:#e9ecef;--semi-white:#f8f9fa;--white:#fff;--color:var(--black);--bg:var(--white);--border-color:var(--light-grey-1);--font-size:16px;--font-size-secondary:14px;--font-size-tertiary:12px;--font-weight-light:300;--font-weight-regular:400;--font-weight-medium:500;--font-weight-semi-bold:600;--font-weight-bold:700;--font-weight-extra-bold:800;--font-weight-heavy:900}.dark-mode{--color:var(--semi-white);--bg:var(--black);--border-color:var(--grey-1)}body{font-family:Poppins,sans-serif;font-weight:400;font-weight:var(--font-weight-regular);font-size:16px;font-size:var(--font-size);background-color:#fff;background-color:var(--bg);transition:background-color .3s}a:active,a:hover,a:link,a:visited,body{color:#212529;color:var(--color)}h1{font-size:36px;font-weight:900;font-weight:var(--font-weight-heavy)}h1,h2{margin:0}h2{font-size:22px}h3{margin:0;font-size:16px;font-size:var(--font-size);font-weight:300;font-weight:var(--font-weight-light)}blockquote,h3{color:#6c757d;color:var(--grey-1)}blockquote{border-left:4px solid #6c757d;border-left:4px solid var(--grey-1);margin-left:0;padding-left:40px}pre{border-radius:5px}.jz-flex-row>:not(:last-child){margin-right:4px}code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:0 0;font-family:"Fira Code",Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2e3440}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#636f88}.token.punctuation{color:#81a1c1}.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#81a1c1}.token.number{color:#b48ead}.token.boolean{color:#81a1c1}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a3be8c}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#81a1c1}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#88c0d0}.token.keyword{color:#81a1c1}.token.important,.token.regex{color:#ebcb8b}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.nuxt-progress{position:fixed;top:0;left:0;right:0;height:2px;width:0;opacity:1;transition:width .1s,opacity .4s;background-color:#000;z-index:999999}.nuxt-progress.nuxt-progress-notransition{transition:none}.nuxt-progress-failed{background-color:red}.page-blog-post[data-v-622ce4a6]{display:flex;flex-direction:column;align-items:center;padding:40px 20px}.page-blog-post__sidebar[data-v-622ce4a6]{width:100%;position:fixed;top:0;display:flex;justify-content:center;margin-right:600px}.page-blog-post__sidebar .sidebar-body[data-v-622ce4a6]{width:200px}.page-blog-post .blog-post[data-v-622ce4a6]{width:100%;max-width:680px}.page-blog-post .blog-post__header .meta[data-v-622ce4a6]{display:flex;align-items:center;font-size:var(--font-size-tertiary);color:var(--grey-1);margin-top:20px}.page-blog-post .blog-post__header .meta[data-v-622ce4a6]>:not(:last-child){margin-right:6px}.page-blog-post .blog-post__header .meta .author-name[data-v-622ce4a6]{text-decoration:none;color:var(--grey-1);font-weight:var(--font-weight-semi-bold)}.page-blog-post .blog-post__header .meta .author-profile-pic[data-v-622ce4a6]{border-radius:50%;height:28px;width:28px}.page-blog-post .divider[data-v-622ce4a6]{border:1px solid var(--border-color);margin:40px 100px}.site-nav[data-v-027bad91]{width:100%;padding-bottom:40px}.site-nav ul[data-v-027bad91]{display:flex;justify-content:center;padding:0;margin:0}.site-nav ul li[data-v-027bad91],.site-nav ul[data-v-027bad91]{list-style:none}.site-nav ul li[data-v-027bad91]:not(:last-child){margin-right:20px}.site-nav ul li a[data-v-027bad91]{color:var(--grey-1);text-decoration:none}.site-nav ul li a.nuxt-link-exact-active[data-v-027bad91],.site-nav ul li a[data-v-027bad91]:hover{color:var(--color);transition:color .3s}.blog-post-video[data-v-159e796e]{position:relative;margin-top:1em;aspect-ratio:16/9;background-size:cover}.blog-post-video>[data-v-159e796e]{display:block;height:100%;width:100%}.blog-post-footer[data-v-679d9e7f]{text-align:center}@media only screen and (min-width:600px){.blog-post-footer[data-v-679d9e7f]{padding:0 100px}}.blog-post-footer__title[data-v-679d9e7f]{margin-bottom:10px}.blog-post-footer__content[data-v-679d9e7f]{margin-bottom:20px}.blog-post-footer .action-link[data-v-679d9e7f]{padding:10px 20px;background:var(--color);color:var(--bg);border-radius:4px;text-decoration:none;font-size:var(--font-size-secondary);display:inline-flex}.blog-post-footer .action-link svg[data-v-679d9e7f]{margin-right:10px;fill:var(--bg)}</style><link rel="preload" href="/_nuxt/static/1650499499/blog/how-to-multistream/state.js" as="script"><link rel="preload" href="/_nuxt/static/1650499499/blog/how-to-multistream/payload.js" as="script"><link rel="preload" href="/_nuxt/static/1650499499/manifest.js" as="script">
  </head>
  <body>
    <script data-n-head="ssr" data-hid="nuxt-color-mode-script" data-pbody="true">!function(){"use strict";var t=window,e=document,s=e.documentElement,a=["dark","light"],o=window.localStorage.getItem("nuxt-color-mode")||"system",c="system"===o?n():o,e=e.body.getAttribute("data-color-mode-forced");function r(e){e+="-mode";s.classList?s.classList.add(e):s.className+=" "+e}function l(e){return t.matchMedia("(prefers-color-scheme"+e+")")}function n(){if(t.matchMedia&&"not all"!==l("").media)for(var e of a)if(l(":"+e).matches)return e;return"light"}r(c=e?e:c),t.__NUXT_COLOR_MODE__={preference:o,value:c,getColorScheme:n,addClass:r,removeClass:function(e){e+="-mode";s.classList?s.classList.remove(e):s.className=s.className.replace(new RegExp(e,"g"),"")}}}()</script><div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div class="page-blog-post" data-v-622ce4a6><nav class="site-nav" data-v-027bad91 data-v-622ce4a6><ul data-v-027bad91><li data-v-027bad91><a href="/" class="nuxt-link-active" data-v-027bad91>Home</a></li> <li data-v-027bad91><a href="/blog" class="nuxt-link-active" data-v-027bad91>Blog</a></li></ul></nav> <article class="blog-post" data-v-622ce4a6><div class="blog-post__header" data-v-622ce4a6><h1 data-v-622ce4a6>How to Build a Restream Server</h1> <h3 data-v-622ce4a6>You don't NEED Restream.io to multistream. Try building it yourself for less!</h3> <div data-v-622ce4a6><div class="meta jz-flex-row" data-v-622ce4a6><img src="/img/profile.png" alt="Author profile picture" class="author-profile-pic" data-v-622ce4a6> <a href="/" class="author-name nuxt-link-active" data-v-622ce4a6> Jason Sims </a> <span data-v-622ce4a6>Apr 21</span> <span data-v-622ce4a6>·</span> <span data-v-622ce4a6>8 min read</span></div></div></div> <div class="blog-post__content nuxt-content" data-v-622ce4a6 data-v-622ce4a6><div class="blog-post-video" style="background-image:url(/img/how-to-multistream_thumb.png)" data-v-159e796e data-v-622ce4a6>
  <iframe src="https://www.youtube.com/embed/duvHW7P37Vw" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen data-v-159e796e data-v-622ce4a6></iframe>
</div>
<p data-v-622ce4a6 data-v-622ce4a6>Lately, I’ve been hearing a lot of talk about giving up on the Twitch Affiliate program and multistreaming to YouTube Gaming, Twitch, Facebook Gaming, or any other streaming platform you like for increased exposure to your content. I’m not going to get into the pros and cons of this approach in this article but will instead focus on how to multistream if you’re interested in doing so. More specifically, the cheapest way I’ve found to do it without overloading your upload connection to your internet provider. This should work with most streaming software but I’ll refer to OBS (Open Broadcaster Software) here.</p>
<p data-v-622ce4a6 data-v-622ce4a6>If you’re only here to find out how to build your own restream server then you can <a href="#the-diy-option" data-v-622ce4a6 data-v-622ce4a6>jump ahead to here</a>.</p>
<h2 id="first-what-is-multistreaming" data-v-622ce4a6 data-v-622ce4a6><a href="#first-what-is-multistreaming" aria-hidden="true" tabindex="-1" data-v-622ce4a6 data-v-622ce4a6><span class="icon icon-link" data-v-622ce4a6 data-v-622ce4a6></span></a>First, what is multistreaming?</h2>
<p data-v-622ce4a6 data-v-622ce4a6>If you’re not familiar with multistreaming, it essentially duplicates your live stream to multiple sites instead of the standard setup of sending it to one. The options for doing this vary based on where the duplication occurs.</p>
<ul data-v-622ce4a6 data-v-622ce4a6>
<li data-v-622ce4a6 data-v-622ce4a6><strong data-v-622ce4a6 data-v-622ce4a6>The easiest option</strong>: Stream to another web service that will duplicate it</li>
<li data-v-622ce4a6 data-v-622ce4a6><strong data-v-622ce4a6 data-v-622ce4a6>The free option</strong>: Have your PC duplicate the stream locally</li>
<li data-v-622ce4a6 data-v-622ce4a6><strong data-v-622ce4a6 data-v-622ce4a6>The DIY option</strong>: Build your own web server that will duplicate it
I’ll go over each option but first, it’s important to understand what an RTMP server is. Some computer on the internet has to receive your encoded stream so it can be displayed to your viewers and RTMP is just an agreement between your PC and the receiver on how to send this information. This article isn’t a deep dive into the RTMP protocol but if you’d like to learn more about it you can <a href="https://www.adobe.com/content/dam/acom/en/devnet/rtmp/pdf/rtmp_specification_1.0.pdf" rel="nofollow noopener noreferrer" target="_blank" data-v-622ce4a6 data-v-622ce4a6>start here</a>.</li>
</ul>
<h2 id="the-easiest-option" data-v-622ce4a6 data-v-622ce4a6><a href="#the-easiest-option" aria-hidden="true" tabindex="-1" data-v-622ce4a6 data-v-622ce4a6><span class="icon icon-link" data-v-622ce4a6 data-v-622ce4a6></span></a>The easiest option</h2>
<h3 id="send-your-stream-to-another-web-service-that-will-duplicate-it" data-v-622ce4a6 data-v-622ce4a6><a href="#send-your-stream-to-another-web-service-that-will-duplicate-it" aria-hidden="true" tabindex="-1" data-v-622ce4a6 data-v-622ce4a6><span class="icon icon-link" data-v-622ce4a6 data-v-622ce4a6></span></a>Send your stream to another web service that will duplicate it</h3>
<p data-v-622ce4a6 data-v-622ce4a6><a href="https://restream.io/multistreaming" rel="nofollow noopener noreferrer" target="_blank" data-v-622ce4a6 data-v-622ce4a6>Restream.io</a> hosts an RTMP server that will accept your stream and then forward it to any number of other RTMP servers you like, whether that’s Twitch, Facebook, YouTube, or some other platform. At the time of writing this article, it supports over 30 streaming providers and is by far the easiest option with some of the best features I’ve seen. However, if you don’t want their logo showing up on your streams or would like to stream to more than 2 channels you'll have to <a href="https://restream.io/pricing" rel="nofollow noopener noreferrer" target="_blank" data-v-622ce4a6 data-v-622ce4a6>pay $16/mo</a>.</p>
<h2 id="the-free-option" data-v-622ce4a6 data-v-622ce4a6><a href="#the-free-option" aria-hidden="true" tabindex="-1" data-v-622ce4a6 data-v-622ce4a6><span class="icon icon-link" data-v-622ce4a6 data-v-622ce4a6></span></a>The free option</h2>
<h3 id="have-your-pc-duplicate-the-stream-locally" data-v-622ce4a6 data-v-622ce4a6><a href="#have-your-pc-duplicate-the-stream-locally" aria-hidden="true" tabindex="-1" data-v-622ce4a6 data-v-622ce4a6><span class="icon icon-link" data-v-622ce4a6 data-v-622ce4a6></span></a>Have your PC duplicate the stream locally</h3>
<p data-v-622ce4a6 data-v-622ce4a6>You should expect to pay for services that add a lot of value like Restream but anyone on a budget that only needs basic multistreaming capabilities will probably be looking for a free alternative like <a href="https://obsproject.com/forum/resources/multiple-rtmp-outputs-plugin.964/" rel="nofollow noopener noreferrer" target="_blank" data-v-622ce4a6 data-v-622ce4a6>multi-rtmp</a>. It’s an OBS plugin that hosts your own RTMP server on your PC that handles the broadcasting instead of Restream.io. This is <em data-v-622ce4a6 data-v-622ce4a6>an awesome option</em> but has a pretty big problem. Your internet connection will probably struggle with it because the broadcasting is all happening on your local network. For example, if you’re using it to stream to 3 different platforms, then you are uploading 3 versions of your stream. That means for a standard 720p60fps stream getting multistreamed to 3 platforms, you’re uploading 4,500kbps x 3 = 13,500kbps (13.5mbps). Keep this in mind and run a speed test to see how that number compares against the upload speed you’re getting from your ISP.</p>
<h2 id="the-diy-option" data-v-622ce4a6 data-v-622ce4a6><a href="#the-diy-option" aria-hidden="true" tabindex="-1" data-v-622ce4a6 data-v-622ce4a6><span class="icon icon-link" data-v-622ce4a6 data-v-622ce4a6></span></a>The DIY option</h2>
<h3 id="build-your-own-web-server-that-will-duplicate-it" data-v-622ce4a6 data-v-622ce4a6><a href="#build-your-own-web-server-that-will-duplicate-it" aria-hidden="true" tabindex="-1" data-v-622ce4a6 data-v-622ce4a6><span class="icon icon-link" data-v-622ce4a6 data-v-622ce4a6></span></a>Build your own web server that will duplicate it</h3>
<p data-v-622ce4a6 data-v-622ce4a6>So what can you do if you don’t want to pay $16/mo on restream and don’t have enough upload speed to use the multi-rtmp OBS plugin? Host your own RTMP server in the cloud! You can do this with a service called Linode that lets you run servers on their platform for a monthly fee.</p>
<p data-v-622ce4a6 data-v-622ce4a6>Fortunately, it doesn’t take much computing power to forward a stream to multiple destinations so you can do this for $5/mo with their cheapest option. This option also has a 1GB upload speed allowing for up to 650GB uploaded each month which should get you around 80 hours of streaming to 3 platforms. Here’s how to set it up after <a href="https://login.linode.com/signup" rel="nofollow noopener noreferrer" target="_blank" data-v-622ce4a6 data-v-622ce4a6>sigining up for a Linode account</a>:</p>
<h3 id="create-a-linode-server" data-v-622ce4a6 data-v-622ce4a6><a href="#create-a-linode-server" aria-hidden="true" tabindex="-1" data-v-622ce4a6 data-v-622ce4a6><span class="icon icon-link" data-v-622ce4a6 data-v-622ce4a6></span></a>Create a Linode server</h3>
<ol data-v-622ce4a6 data-v-622ce4a6>
<li data-v-622ce4a6 data-v-622ce4a6><a href="https://cloud.linode.com/linodes/create" rel="nofollow noopener noreferrer" target="_blank" data-v-622ce4a6 data-v-622ce4a6>Create a new Linode server</a></li>
<li data-v-622ce4a6 data-v-622ce4a6>Choose an operating system. I recommend the latest version of Ubuntu</li>
<li data-v-622ce4a6 data-v-622ce4a6>Choose the Region closest to you</li>
<li data-v-622ce4a6 data-v-622ce4a6>Choose a Linode Plan. The cheapest Nanode 1 GB plan is enough for what we’re doing</li>
<li data-v-622ce4a6 data-v-622ce4a6>Choose a password</li>
<li data-v-622ce4a6 data-v-622ce4a6>Click “Create Linode”
<img src="/img/how-to-multistream_1.gif" alt="" style="margin-bottom:20px;width:100%" data-v-622ce4a6></li>
</ol>
<h3 id="setup-the-stream-forwarding-service-nginx" data-v-622ce4a6 data-v-622ce4a6><a href="#setup-the-stream-forwarding-service-nginx" aria-hidden="true" tabindex="-1" data-v-622ce4a6 data-v-622ce4a6><span class="icon icon-link" data-v-622ce4a6 data-v-622ce4a6></span></a>Setup the stream forwarding service (NGINX)</h3>
<p data-v-622ce4a6 data-v-622ce4a6>Once it’s done you just need to install and set up NGINX which will run your RTMP service. Linode has a great <a href="https://www.linode.com/docs/guides/set-up-a-streaming-rtmp-server/" rel="nofollow noopener noreferrer" target="_blank" data-v-622ce4a6 data-v-622ce4a6>step-by-step article</a> on how to do this but essentially you just need to:</p>
<ol data-v-622ce4a6 data-v-622ce4a6>
<li data-v-622ce4a6 data-v-622ce4a6>Launch the LISH Console for <a href="https://cloud.linode.com/linodes?view=grid" rel="nofollow noopener noreferrer" target="_blank" data-v-622ce4a6 data-v-622ce4a6>your new Linode</a></li>
<li data-v-622ce4a6 data-v-622ce4a6>Install the NGNIX server, RTMP service, and other dependencies</li>
</ol>
<div class="nuxt-content-highlight" data-v-622ce4a6 data-v-622ce4a6><pre class="line-numbers language-text" data-v-622ce4a6 data-v-622ce4a6><code data-v-622ce4a6 data-v-622ce4a6>sudo apt install build-essential libpcre3 libpcre3-dev libssl-dev nginx-full libnginx-mod-rtmp ffmpeg
</code></pre></div>
<ol start="2" data-v-622ce4a6 data-v-622ce4a6>
<li data-v-622ce4a6 data-v-622ce4a6>Configure RTMP by editing the NGINX configuration file</li>
</ol>
<div class="nuxt-content-highlight" data-v-622ce4a6 data-v-622ce4a6><pre class="line-numbers language-text" data-v-622ce4a6 data-v-622ce4a6><code data-v-622ce4a6 data-v-622ce4a6>vim /etc/nginx/nginx.conf
</code></pre></div>
<ol start="3" data-v-622ce4a6 data-v-622ce4a6>
<li data-v-622ce4a6 data-v-622ce4a6>Paste this RTMP configuration into the NGINX configuration file and update it with your desired forwarding destinations. You can add a "push" line for each service you would like to forward the stream to. Note, Facebook Gaming streams need some extra configuration to work <a href="#how-to-forward-to-facebook-gaming" data-v-622ce4a6 data-v-622ce4a6>which I’ll address later</a>.</li>
</ol>
<div class="nuxt-content-highlight" data-v-622ce4a6 data-v-622ce4a6><pre class="line-numbers language-shell" data-v-622ce4a6 data-v-622ce4a6><code data-v-622ce4a6 data-v-622ce4a6>rtmp <span class="token punctuation" data-v-622ce4a6 data-v-622ce4a6>{</span>
  server <span class="token punctuation" data-v-622ce4a6 data-v-622ce4a6>{</span>
    listen <span class="token number" data-v-622ce4a6 data-v-622ce4a6>1935</span><span class="token punctuation" data-v-622ce4a6 data-v-622ce4a6>;</span>

    application live <span class="token punctuation" data-v-622ce4a6 data-v-622ce4a6>{</span>
      live on<span class="token punctuation" data-v-622ce4a6 data-v-622ce4a6>;</span>

      <span class="token comment" data-v-622ce4a6 data-v-622ce4a6># Twitch -- For for a list of ingest URLs see,</span>
      <span class="token comment" data-v-622ce4a6 data-v-622ce4a6># https://stream.twitch.tv/ingests/</span>
      <span class="token comment" data-v-622ce4a6 data-v-622ce4a6>#rtmp://atl.contribute.live-video.net/app/{YOUR-STREAM-KEY}</span>

      <span class="token comment" data-v-622ce4a6 data-v-622ce4a6># YouTube</span>
      <span class="token comment" data-v-622ce4a6 data-v-622ce4a6>#push rtmp://a.rtmp.youtube.com/live2/{YOUR-STREAM-KEY}</span>

      <span class="token comment" data-v-622ce4a6 data-v-622ce4a6># Facebook -- Stunnel must be configured for this to work! I also</span>
      <span class="token comment" data-v-622ce4a6 data-v-622ce4a6># recommend using a persistent stream key if you're setting this up so</span>
      <span class="token comment" data-v-622ce4a6 data-v-622ce4a6># you don't need to update the server configuration with every stream.</span>
      <span class="token comment" data-v-622ce4a6 data-v-622ce4a6>#push rtmp://127.0.0.1:19350/rtmp/{YOUR-STREAM-KEY}</span>
    <span class="token punctuation" data-v-622ce4a6 data-v-622ce4a6>}</span>
  <span class="token punctuation" data-v-622ce4a6 data-v-622ce4a6>}</span>
<span class="token punctuation" data-v-622ce4a6 data-v-622ce4a6>}</span>
</code></pre></div>
<ol start="4" data-v-622ce4a6 data-v-622ce4a6>
<li data-v-622ce4a6 data-v-622ce4a6>Startup your server! You’ll need to run this command any time you make changes to the configuration file for them to get picked up.</li>
</ol>
<div class="nuxt-content-highlight" data-v-622ce4a6 data-v-622ce4a6><pre class="line-numbers language-shell" data-v-622ce4a6 data-v-622ce4a6><code data-v-622ce4a6 data-v-622ce4a6>systemctl restart nginx.service <span class="token operator" data-v-622ce4a6 data-v-622ce4a6>&&</span> systemctl status nginx.service
</code></pre></div>
<h3 id="stream" data-v-622ce4a6 data-v-622ce4a6><a href="#stream" aria-hidden="true" tabindex="-1" data-v-622ce4a6 data-v-622ce4a6><span class="icon icon-link" data-v-622ce4a6 data-v-622ce4a6></span></a>Stream!</h3>
<p data-v-622ce4a6 data-v-622ce4a6>Now all you need to do is stream to your new RTMP server and it will handle the rest. Just grab the IP address of your Linode instance and put it into OBS under Settings > Stream</p>
<ul data-v-622ce4a6 data-v-622ce4a6>
<li data-v-622ce4a6 data-v-622ce4a6>Service: Custom</li>
<li data-v-622ce4a6 data-v-622ce4a6>Server: rtmp://{{YOUR-LINODE-IP}}/live</li>
<li data-v-622ce4a6 data-v-622ce4a6>Stream Key: Makeup anything you want. Just don't share it with anyone.
<blockquote data-v-622ce4a6 data-v-622ce4a6>
<p data-v-622ce4a6 data-v-622ce4a6>I recommend leaving all "push" lines commented out at first so you can test your server before going live. After starting the server and going live in your streaming software you can open a network stream (File > Open Network) in VLC and enter the stream URL (Ex. http://{your-linode-server-ip}/live/{YOUR-STREM-KEY}). If everything is working you should see your stream in VLC!</p>
</blockquote>
</li>
</ul>
<h2 id="how-to-forward-to-facebook-gaming" data-v-622ce4a6 data-v-622ce4a6><a href="#how-to-forward-to-facebook-gaming" aria-hidden="true" tabindex="-1" data-v-622ce4a6 data-v-622ce4a6><span class="icon icon-link" data-v-622ce4a6 data-v-622ce4a6></span></a>How to forward to Facebook Gaming</h2>
<p data-v-622ce4a6 data-v-622ce4a6>That should be all you need to get started. However, there are a couple of extra things you may need to know depending on where you stream. Facebook gaming requires that streams be sent using rtmps which isn’t supported by default in NGINX. Because of this, you’ll need to do some extra steps to get things working with Facebook.</p>
<h3 id="add-support-for-rtmps-with-stunnel" data-v-622ce4a6 data-v-622ce4a6><a href="#add-support-for-rtmps-with-stunnel" aria-hidden="true" tabindex="-1" data-v-622ce4a6 data-v-622ce4a6><span class="icon icon-link" data-v-622ce4a6 data-v-622ce4a6></span></a>Add support for rtmps with stunnel</h3>
<ol data-v-622ce4a6 data-v-622ce4a6>
<li data-v-622ce4a6 data-v-622ce4a6>Install <a href="https://www.stunnel.org/" rel="nofollow noopener noreferrer" target="_blank" data-v-622ce4a6 data-v-622ce4a6>stunnel</a>. This service will be used to accept an rtmp stream and forward it to an rtmps destination.</li>
</ol>
<div class="nuxt-content-highlight" data-v-622ce4a6 data-v-622ce4a6><pre class="line-numbers language-text" data-v-622ce4a6 data-v-622ce4a6><code data-v-622ce4a6 data-v-622ce4a6>sudo apt-get install stunnel4
</code></pre></div>
<ol start="2" data-v-622ce4a6 data-v-622ce4a6>
<li data-v-622ce4a6 data-v-622ce4a6>Create an stunnel configuration for forwarding to Facebook</li>
</ol>
<div class="nuxt-content-highlight" data-v-622ce4a6 data-v-622ce4a6><pre class="line-numbers language-text" data-v-622ce4a6 data-v-622ce4a6><code data-v-622ce4a6 data-v-622ce4a6>vim /etc/stunnel/conf.d/fb.conf
</code></pre></div>
<ol start="3" data-v-622ce4a6 data-v-622ce4a6>
<li data-v-622ce4a6 data-v-622ce4a6>Paste in the following configuration</li>
</ol>
<div class="nuxt-content-highlight" data-v-622ce4a6 data-v-622ce4a6><pre class="line-numbers language-text" data-v-622ce4a6 data-v-622ce4a6><code data-v-622ce4a6 data-v-622ce4a6>[fb-live]
client = yes
accept = 127.0.0.1:19350
connect = live-api-s.facebook.com:443
verifyChain = no
</code></pre></div>
<ol start="4" data-v-622ce4a6 data-v-622ce4a6>
<li data-v-622ce4a6 data-v-622ce4a6>Update the stunnel configuration</li>
</ol>
<div class="nuxt-content-highlight" data-v-622ce4a6 data-v-622ce4a6><pre class="line-numbers language-text" data-v-622ce4a6 data-v-622ce4a6><code data-v-622ce4a6 data-v-622ce4a6>vim /etc/default/stunnel4
</code></pre></div>
<ol start="5" data-v-622ce4a6 data-v-622ce4a6>
<li data-v-622ce4a6 data-v-622ce4a6>Enable the stunnel service and include the new Facebook configuration file</li>
</ol>
<div class="nuxt-content-highlight" data-v-622ce4a6 data-v-622ce4a6><pre class="line-numbers language-text" data-v-622ce4a6 data-v-622ce4a6><code data-v-622ce4a6 data-v-622ce4a6>ENABLE=1
FILES="/etc/stunnel/*.conf"
</code></pre></div>
<ol start="6" data-v-622ce4a6 data-v-622ce4a6>
<li data-v-622ce4a6 data-v-622ce4a6>Update the RTMP configuration</li>
</ol>
<div class="nuxt-content-highlight" data-v-622ce4a6 data-v-622ce4a6><pre class="line-numbers language-text" data-v-622ce4a6 data-v-622ce4a6><code data-v-622ce4a6 data-v-622ce4a6>vim /etc/nginx/nginx.conf
</code></pre></div>
<ol start="7" data-v-622ce4a6 data-v-622ce4a6>
<li data-v-622ce4a6 data-v-622ce4a6>Add a new "push" line to forward to stunnel. When the stream comes into your Linode server, NGINX will forward it to your stunnel service over rtmp which will then send it to Facebook over rtmps.</li>
</ol>
<div class="nuxt-content-highlight" data-v-622ce4a6 data-v-622ce4a6><pre class="line-numbers language-text" data-v-622ce4a6 data-v-622ce4a6><code data-v-622ce4a6 data-v-622ce4a6>push rtmp://127.0.0.1:19350/rtmp/{YOUR-STREAM-KEY}
</code></pre></div>
<ol start="8" data-v-622ce4a6 data-v-622ce4a6>
<li data-v-622ce4a6 data-v-622ce4a6>Restart nginx and stunnel so your changes take effect. The status commands aren't required but will let you know if the service ran into any issues starting up.</li>
</ol>
<div class="nuxt-content-highlight" data-v-622ce4a6 data-v-622ce4a6><pre class="line-numbers language-text" data-v-622ce4a6 data-v-622ce4a6><code data-v-622ce4a6 data-v-622ce4a6>systemctl restart stunnel4 && systemctl restart nginx.service && systemctl status stunnel4 && systemctl status nginx.service
</code></pre></div>
<h2 id="what-about-transcoding" data-v-622ce4a6 data-v-622ce4a6><a href="#what-about-transcoding" aria-hidden="true" tabindex="-1" data-v-622ce4a6 data-v-622ce4a6><span class="icon icon-link" data-v-622ce4a6 data-v-622ce4a6></span></a>What about transcoding?</h2>
<p data-v-622ce4a6 data-v-622ce4a6>You can also do transcoding with this solution. You’ll just need to install ffmpeg and use the <a href="https://github.com/arut/nginx-rtmp-module/wiki/Directives#exec_push" rel="nofollow noopener noreferrer" target="_blank" data-v-622ce4a6 data-v-622ce4a6>exec_push directive</a> instead of push. However, this will increase the CPU load on the server so you may need to increase the size of the server to get it working. You can find some examples of transcoding on the <a href="https://github.com/arut/nginx-rtmp-module" rel="nofollow noopener noreferrer" target="_blank" data-v-622ce4a6 data-v-622ce4a6>nginx-rtmp-module GitHub page</a> if you’re interested.</p></div> <section data-v-622ce4a6><div class="divider" data-v-622ce4a6></div></section> <section class="blog-post-footer" data-v-679d9e7f data-v-622ce4a6><div class="blog-post-footer__title" data-v-679d9e7f><strong data-v-679d9e7f>Thanks for reading!</strong></div> <div class="blog-post-footer__content" data-v-679d9e7f>
    Hopefully it was helpful. Follow me on Twitter where I post similar
    content and connect with fellow gamers.
  </div> <div class="blog-post-footer__actions" data-v-679d9e7f><a href="https://twitter.com/jzimz" rel="noopener" target="_blank" class="action-link jz-flex-row" data-v-679d9e7f><svg role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24px" height="24px" data-v-679d9e7f data-v-679d9e7f><title data-v-679d9e7f data-v-679d9e7f>Twitter icon</title><path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z" data-v-679d9e7f data-v-679d9e7f></path></svg> Follow me on Twitter
    </a></div></section></article></div></div></div><script defer src="/_nuxt/static/1650499499/blog/how-to-multistream/state.js"></script><script src="/_nuxt/e13a847.js" defer></script><script src="/_nuxt/4476dfd.js" defer></script><script src="/_nuxt/51445f8.js" defer></script><script src="/_nuxt/66def5b.js" defer></script><script src="/_nuxt/bada754.js" defer></script><script src="/_nuxt/3afc5f9.js" defer></script><script src="/_nuxt/2176ed4.js" defer></script><script src="/_nuxt/1ee46e7.js" defer></script>
  </body>
</html>
